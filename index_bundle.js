!function(){"use strict";function e(e,n,t,r){var a=document.createElement("table");a.innerHTML=n.map((function(e,n){return"<tr>".concat(e.map((function(e,t){return 1===e?"<td \n        data-x=".concat(t,"\n        data-y=").concat(n,'\n        class="cell alive"></td>'):"<td \n      data-x=".concat(t,"\n      data-y=").concat(n,'\n      class="cell dead"></td>')})).join(""),"</tr>")})).join(""),a.querySelectorAll("td").forEach((function(e){var n=Number(e.dataset.x),r=Number(e.dataset.y),a=e.className;return 1===t[r][n]&&a.includes("dead")?e.className=e.className.replace("dead","shouldBorn"):0===t[r][n]&&a.includes("alive")&&(e.className=e.className.replace("alive","shouldDie")),e})),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(a),a.addEventListener("click",(function(e){var n=e.target;if(null!==n&&"TD"===n.tagName){var t=n.getAttribute("data-x"),a=n.getAttribute("data-y");Number(t)>=0&&Number(a)>=0&&r(Number(t),Number(a))}}))}function n(e,n,t){var r=e[t];if(void 0===r)return 0;var a=r[n];return void 0===a?0:a}function t(e){return e.map((function(t,r){return t.map((function(t,a){var u,c=function(e,t,r){for(var a=0,u=e-1;u<=e+1;u+=1)a+=Number(n(r,u,t-1));for(var c=e-1;c<=e+1;c+=1)a+=Number(n(r,c,t+1));return(a+=Number(n(r,e-1,t)))+Number(n(r,e+1,t))}(a,r,e),i=n(e,a,r);return 3===(u=c)?1:u>3||u<2?0:2===u&&1===i?1:0}))}))}var r=document.createElement("div"),a=document.createElement("div");document.body.appendChild(r),document.body.appendChild(a),function(n){var r,a,u,c,i,l=!1,d=document.createElement("div");d.className="field-wrapper",n.appendChild(d);var o=document.createElement("input");o.type="number",o.name="columns",o.placeholder="Количество столбцов",n.appendChild(o);var m=document.createElement("input");m.type="number",m.name="strings",m.placeholder="Количество строк",n.appendChild(m);var v=document.createElement("input");v.type="range",v.name="time",v.min="1",v.max="10",v.value="5",n.appendChild(v);var f=document.createElement("button");f.innerText="Start",n.appendChild(f);var p=function n(r,c){a[c][r]=0===a[c][r]?1:0,u=t(a),e(d,a,u,n)};function s(){l=!1,f.innerText="Start",clearInterval(r)}function h(){l=!0,f.innerText="Stop",c=Number(o.value),i=Number(m.value),a=function(e,n){for(var t=[],r=0;r<n;r++){for(var a=[],u=0;u<e;u++)a.push(Math.round(Math.random()));t.push(a)}return t}(c,i),u=t(a),e(d,a,u,p),r=window.setInterval((function(){var n,r;n=Number(o.value),r=Number(m.value),n===c&&r===i||(a=function(e,n,t,r,a){if(t>a)e.splice(a-1);else if(t<a)for(var u=0;u<a-t;u++)e.push(new Array(n).map((function(){return 0})));return n>r?e.map((function(e){return e.splice(r-1)})):n<r&&e.forEach((function(e){for(var t=0;t<r-n;t++)e.push(0)})),e}(a,c,i,n,r),c=n,i=r),a=t(a),u=t(a),e(d,a,u,p),function(e){for(var n=0;n<e.length;n+=1)for(var t=e[n],r=0;r<t.length;r+=1)if(t[r])return!0;return!1}(a)||(alert("Death on the block"),s())}),1e3*Number(v.value))}f.addEventListener("click",(function(){l?s():h()}))}(r)}();